<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>THM-UNIVERSUM</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body id="body">
    <header>
        <img id="logo" src="" alt="Logo"/>
        <h2 id="title2"></h2>
        <h1 id="title"></h1>
    </header>
    <main id="planeten_container">
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet1"></div>
        </div>
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet2"></div>
        </div>   
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet3"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet4"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet5"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet6"></div>
        </div>
    </main>
    <footer>
        <div>
            <p class="footetext" id="copyright"></p>
            <a class="footetext" id="impressum" href="/"></a>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="script.js"></script>
    <script>

        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "data.xml",
                dataType: "xml",
                success: function(xml) {
                    // Body
                    $('#body').css('background-image', 'url(' + $(xml).find('background').text() + ')');

                    // Header
                    $('#logo').attr('src', $(xml).find('logo').text());
                    $('#title2').text($(xml).find('title1').text());
                    $('#title').text($(xml).find('title2').text());

                    // Planets
                    $(xml).find('planet').each(function(index) {
                var id = $(this).attr('id');
                var title = $(this).find('title').text();
                var image = $(this).find('image').text();
                var link = $(this).find('link').text(); // Link aus XML holen

                // Set planet background image
                $('#planet' + id).css('background-image', 'url(' + image + ')');
                
                // Set planet title
                $('.planet_container:nth-child(' + (index + 1) + ') .planet_title').text(title);

                // Set planet link
                $('.planet_container:nth-child(' + (index + 1) + ')').click(function() {
                    openPlanet(link);
                });
            });

                    // Footer
                    $('#copyright').text($(xml).find('links > copyright').text());
                    $('#impressum').text($(xml).find('links > impressum').text());
                },
                error: function() {
                    console.log("Failed to load XML file.");
                }
            });
        });

        function openPlanet(relativeUrl) {
    // Holen der Basis-URL des aktuellen Dokuments
    var baseUrl = window.location.href.split('/').slice(0, -1).join('/');

    // Verwandeln des relativen Links in einen absoluten Link
    var absoluteUrl = baseUrl + '/' + relativeUrl;

    console.log('Navigating to: ' + absoluteUrl);
    window.location.href = absoluteUrl;
}
    </script>
</body>
</html>
