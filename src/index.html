<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>THM-UNIVERSUM</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body id="body">
    <header>
        <img id="logo" src="" alt="Logo"/>
        <h2 id="title2"></h2>
        <h1 id="title"></h1>
    </header>
    <a class="menu" id="skillbars" title="Zu deinen Skills">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z"/></svg>
    </a>
    <a class="menu" id="close" title="Schliessen">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
    </a>
    <main id="planeten_container">
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet1"></div>
        </div>
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet2"></div>
        </div>   
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet3"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet4"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet5"></div>
        </div>    
        <div class="planet_container" onclick="openPlanet('')">
            <h1 class="planet_title"></h1>
            <div class="planet" id="planet6"></div>
        </div>
    </main>
    <footer>
        <div>
            <p class="footetext" id="copyright"></p>
            <a class="footetext" id="impressum" href="/"></a>
        </div>
    </footer>

    <div id="overlay"></div>
    <div class="copilot_container">
        <img class="copilot" src="bilder/copilot_winken.svg" alt="copilot_sad">
    </div>
    <div class="textfeld">
        <div id="text"></div>
        <div id="dots"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/TextPlugin.min.js"></script>
    <script src="script.js"></script>
    <script>

        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "data.xml",
                dataType: "xml",
                success: function(xml) {
                    // Body
                    $('#body').css('background-image', 'url(' + $(xml).find('background').text() + ')');

                    // Header
                    $('#logo').attr('src', $(xml).find('logo').text());
                    $('#title2').text($(xml).find('title1').text());
                    $('#title').text($(xml).find('title2').text());

                    // Planets
                    $(xml).find('planet').each(function(index) {
                var id = $(this).attr('id');
                var title = $(this).find('title').text();
                var image = $(this).find('image').text();
                var link = $(this).find('link').text(); // Link aus XML holen

                // Set planet background image
                $('#planet' + id).css('background-image', 'url(' + image + ')');
                
                // Set planet title
                $('.planet_container:nth-child(' + (index + 1) + ') .planet_title').text(title);

                // Set planet link
                $('.planet_container:nth-child(' + (index + 1) + ')').click(function() {
                    openPlanet(link);
                });
            });

                    // Footer
                    $('#copyright').text($(xml).find('links > copyright').text());
                    $('#impressum').text($(xml).find('links > impressum').text());
                },
                error: function() {
                    console.log("Failed to load XML file.");
                }
            });
        });

        function openPlanet(relativeUrl) {
    // Holen der Basis-URL des aktuellen Dokuments
    var baseUrl = window.location.href.split('/').slice(0, -1).join('/');

    // Verwandeln des relativen Links in einen absoluten Link
    var absoluteUrl = baseUrl + '/' + relativeUrl;

    console.log('Navigating to: ' + absoluteUrl);
    window.location.href = absoluteUrl;
}
    </script>
</body>
</html>
