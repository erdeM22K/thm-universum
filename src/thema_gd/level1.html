<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Level 1 - Modellierung</title>
</head>
<body>
    <div class="black_transparent">

        <a href="../thema_gd/gd.html" class="back-to-home" title="Zurück zur Startseite">
            &#8592;
        </a>

        <div class="arrows_container">
            <div class="arrow_image_container" id="arrowLeft">
                <img class="arrow" src="..\bilder\arrow.svg" alt="arrow">
            </div>
            <div class="arrow_image_container" id="arrowRight">
                <img class="arrow" src="..\bilder\arrow.svg" alt="arrow">
            </div>
        </div>
        <div class="modes_container">
            <div class="image_container swipe-container">
                <h2 class="mode_title">Standard-Mode</h2>
                <img class="modes highlight" id="mode1" src="..\bilder\mode1.png" alt="mode1">
            </div>
            <div class="image_container">
                <h2 class="mode_title">Wireframe-Mode</h2>
                <img class="modes highlight" id="mode2" src="..\bilder\mode2.png" alt="mode2">
            </div>
            <div class="image_container">
                <h2 class="mode_title">Smooth-Mode</h2>
                <img class="modes highlight" id="mode3" src="..\bilder\mode3.png" alt="mode3">
            </div>
        </div>
        <div class="copilot_container">
            <img class="copilot" src="..\bilder\copilot_sad.svg" alt="copilot_sad">
        </div>
        <div class="textfeld">
            <div id="text"></div>
            <div id="dots"></div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/Draggable.min.js"></script>
    <script src="script.js"></script>

    <script>
    //Grundstruktur Animation + Interaktion

        var text1 = "Hallo ich bin dein Copilot, Willkommen auf dem Level!";
        var text2 = "Dies ist eine Grundstruktur.";
        var text3 = "Und dies ist ein Beispiel Text.";


        gsap.registerPlugin(TextPlugin);
    
        // Anfangs Text anzeigen
        gsap.to("#text", {
            duration: 3,
            delay: 2,
            text: text1,
            onComplete: function() {
                startDotsAnimation();
                console.log("Text 1 ausgeführt");
            }
        });

        document.addEventListener('DOMContentLoaded', (event) => {
            startLevel();
            initializeModeSwitching();
            mobileSwipe();
    });
    
        // Klick-Eventhandler für das Textfeld ('Klick' für nächsten Text)
        document.querySelectorAll('.textfeld').forEach(function(element) {
            element.addEventListener('click', function() {
                const textElement = document.getElementById("text");
                if (textElement.innerText === text1) {
                    clearText();
                    showNextText(text2);
                } else if (textElement.innerText === text2) {
                    clearText();
                    showNextText(text3);
                }
            });
        });

        //Funktionen ---------------------------------------------------

        function startLevel() {
            gsap.to(".black_transparent", {
                duration: 2, 
                backgroundColor: "rgba(0, 0, 0, 0.5)", // Endfarbe mit Transparenz
                ease: "power1.inOut" 
            });
            gsap.from(".textfeld", {
                y: 1500,
                duration: 3,
                ease: 'power4.out',
            });
            gsap.from(".copilot_container", {
                x: 1500,
                duration: 3,
                ease: 'power4.out',
            });
            gsap.from(".modes_container", {
                duration: 3, 
                opacity: 0,
                delay: 2,
                ease: "power1.inOut" 
            });
            gsap.from(".arrows_container", {
                duration: 3, 
                opacity: 0,
                delay: 2,
                ease: "power1.inOut" 
            });
        }

        // Funktion zum Anzeigen des nächsten Textes
        function showNextText(text) {
            gsap.to("#text", {
                duration: 3,
                delay: 1,
                text: text,
                onComplete: function() {
                    startDotsAnimation(text3);
                    console.log("Text wird ausgeführt");
                }
            });
        }

        function clearText() {
            gsap.to("#text", {
                duration: 0.5,
                text: "",
                onComplete: function() {
                    console.log("Textfeld geleert");
                }
            });
            document.getElementById("dots").style.display = "none";
        }

        function startDotsAnimation(lastText) {
            if (document.getElementById("text").innerText === lastText) {
                document.getElementById("dots").style.display = "none";
            } else {
            document.getElementById("dots").style.display = "block";
            gsap.to("#dots", { duration: 1, repeat: -1, yoyo: true, ease: "power1.inOut", x: "+=10" });
            gsap.to("#dots", {
                        duration: 2,
                        repeat: -1,
                        text: "...",
                        onComplete: function() {
                            
                            console.log("Textfeld geleert");
                        }
                    });
                }
        }
        function killDotsAnimation() {
            document.getElementById("dots").style.display = "none";
        }
    </script>
</body>
</html>